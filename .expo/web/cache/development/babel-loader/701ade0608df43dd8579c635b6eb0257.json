{"ast":null,"code":"\"use strict\";\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _excluded = [\"children\"];\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_native_1 = require(\"react-native\");\n\nvar devsupport_1 = require(\"../../devsupport\");\n\nvar chevronDown_component_1 = require(\"../shared/chevronDown.component\");\n\nvar menuItem_component_1 = require(\"./menuItem.component\");\n\nvar theme_1 = require(\"../../theme\");\n\nvar CHEVRON_DEG_COLLAPSED = -180;\nvar CHEVRON_DEG_EXPANDED = 0;\nvar CHEVRON_ANIM_DURATION = 200;\nvar POSITION_OUTSCREEN = devsupport_1.Point.outscreen();\n\nvar MenuGroup = function (_react_1$default$Comp) {\n  _inherits(MenuGroup, _react_1$default$Comp);\n\n  var _super = _createSuper(MenuGroup);\n\n  function MenuGroup() {\n    var _this;\n\n    _classCallCheck(this, MenuGroup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      submenuHeight: 1\n    };\n    _this.expandAnimation = new react_native_1.Animated.Value(0);\n\n    _this.onPress = function (descriptor, event) {\n      if (_this.hasSubmenu) {\n        var expandValue = _this.expandAnimationValue > 0 ? 0 : _this.state.submenuHeight;\n\n        _this.createExpandAnimation(expandValue).start();\n\n        _this.props.onPress && _this.props.onPress(descriptor, event);\n      }\n    };\n\n    _this.onSubmenuMeasure = function (frame) {\n      _this.setState({\n        submenuHeight: frame.size.height\n      });\n    };\n\n    _this.createExpandAnimation = function (toValue) {\n      return react_native_1.Animated.timing(_this.expandAnimation, {\n        toValue: toValue,\n        duration: CHEVRON_ANIM_DURATION,\n        useNativeDriver: false\n      });\n    };\n\n    _this.renderAccessoryIfNeeded = function (evaProps) {\n      if (!_this.hasSubmenu) {\n        return null;\n      }\n\n      var style = react_native_1.StyleSheet.flatten(evaProps.style);\n      return react_1.default.createElement(react_native_1.Animated.View, {\n        style: {\n          transform: [{\n            rotate: _this.expandToRotateInterpolation\n          }]\n        }\n      }, react_1.default.createElement(chevronDown_component_1.ChevronDown, _extends({}, evaProps, {\n        fill: style.tintColor\n      })));\n    };\n\n    _this.renderItemsWithDefaultProps = function () {\n      return react_1.default.Children.map(_this.props.children, function (item) {\n        return react_1.default.cloneElement(item, _this.defaultItemProps, null);\n      });\n    };\n\n    _this.renderGroupedItems = function (evaStyle) {\n      return react_1.default.createElement(react_native_1.Animated.View, {\n        style: [styles.submenu, _this.submenuStyle, evaStyle]\n      }, _this.renderItemsWithDefaultProps());\n    };\n\n    _this.renderMeasuringGroupedItems = function (evaStyle) {\n      return react_1.default.createElement(devsupport_1.MeasureElement, {\n        shouldUseTopInsets: theme_1.ModalService.getShouldUseTopInsets,\n        onMeasure: _this.onSubmenuMeasure\n      }, _this.renderGroupedItems(evaStyle));\n    };\n\n    _this.renderGroupedItemsIfNeeded = function (evaStyle) {\n      if (!_this.hasSubmenu) {\n        return null;\n      }\n\n      if (_this.shouldMeasureSubmenu) {\n        return _this.renderMeasuringGroupedItems(evaStyle);\n      }\n\n      return _this.renderGroupedItems(evaStyle);\n    };\n\n    return _this;\n  }\n\n  _createClass(MenuGroup, [{\n    key: \"hasSubmenu\",\n    get: function get() {\n      return react_1.default.Children.count(this.props.children) > 0;\n    }\n  }, {\n    key: \"shouldMeasureSubmenu\",\n    get: function get() {\n      return this.state.submenuHeight === 1;\n    }\n  }, {\n    key: \"expandAnimationValue\",\n    get: function get() {\n      return this.expandAnimation._value;\n    }\n  }, {\n    key: \"expandToRotateInterpolation\",\n    get: function get() {\n      return this.expandAnimation.interpolate({\n        inputRange: [-this.state.submenuHeight, CHEVRON_DEG_EXPANDED],\n        outputRange: [CHEVRON_DEG_COLLAPSED + \"deg\", CHEVRON_DEG_EXPANDED + \"deg\"]\n      });\n    }\n  }, {\n    key: \"submenuStyle\",\n    get: function get() {\n      return this.shouldMeasureSubmenu ? styles.outscreen : {\n        height: this.expandAnimation\n      };\n    }\n  }, {\n    key: \"defaultItemProps\",\n    get: function get() {\n      return {\n        appearance: 'grouped'\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          itemProps = _objectWithoutProperties(_this$props, _excluded);\n\n      return react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(menuItem_component_1.MenuItem, _extends({\n        accessoryRight: this.renderAccessoryIfNeeded\n      }, itemProps, {\n        onPress: this.onPress\n      })), this.renderGroupedItemsIfNeeded({}));\n    }\n  }]);\n\n  return MenuGroup;\n}(react_1.default.Component);\n\nexports.MenuGroup = MenuGroup;\nvar styles = react_native_1.StyleSheet.create({\n  outscreen: {\n    position: 'absolute',\n    left: POSITION_OUTSCREEN.x,\n    top: POSITION_OUTSCREEN.y\n  },\n  submenu: {\n    overflow: 'hidden'\n  }\n});","map":{"version":3,"sources":["../../../../../src/components/ui/menu/menuGroup.component.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst devsupport_1 = require(\"../../devsupport\");\nconst chevronDown_component_1 = require(\"../shared/chevronDown.component\");\nconst menuItem_component_1 = require(\"./menuItem.component\");\nconst theme_1 = require(\"../../theme\");\nconst CHEVRON_DEG_COLLAPSED = -180;\nconst CHEVRON_DEG_EXPANDED = 0;\nconst CHEVRON_ANIM_DURATION = 200;\nconst POSITION_OUTSCREEN = devsupport_1.Point.outscreen();\n/**\n * A group of items displayed in Menu.\n * Groups should be rendered within Menu and contain MenuItem components to provide a useful navigation component.\n *\n * @extends React.Component\n *\n * @property {ReactElement<MenuItemProps> | ReactElement<MenuItemProps>[]} children -\n * Items to be rendered within group.\n *\n * @property {ReactText | ReactElement | (TextProps) => ReactElement} title - String, number or a function component\n * to render within the group.\n * If it is a function, expected to return a Text.\n *\n * @property {ReactElement | (ImageProps) => ReactElement} accessoryLeft - Function component\n * to render to start of the *title*.\n * Expected to return an Image.\n *\n * @property {ReactElement | (ImageProps) => ReactElement} accessoryRight - Function component\n * to render to end of the *title*.\n * Expected to return an Image.\n *\n * @property {TouchableOpacityProps} ...TouchableOpacityProps - Any props applied to TouchableOpacity component.\n *\n * @overview-example MenuGroups\n */\nclass MenuGroup extends react_1.default.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            submenuHeight: 1,\n        };\n        this.expandAnimation = new react_native_1.Animated.Value(0);\n        this.onPress = (descriptor, event) => {\n            if (this.hasSubmenu) {\n                const expandValue = this.expandAnimationValue > 0 ? 0 : this.state.submenuHeight;\n                this.createExpandAnimation(expandValue).start();\n                this.props.onPress && this.props.onPress(descriptor, event);\n            }\n        };\n        this.onSubmenuMeasure = (frame) => {\n            this.setState({ submenuHeight: frame.size.height });\n        };\n        this.createExpandAnimation = (toValue) => {\n            return react_native_1.Animated.timing(this.expandAnimation, {\n                toValue: toValue,\n                duration: CHEVRON_ANIM_DURATION,\n                useNativeDriver: false,\n            });\n        };\n        this.renderAccessoryIfNeeded = (evaProps) => {\n            if (!this.hasSubmenu) {\n                return null;\n            }\n            const style = react_native_1.StyleSheet.flatten(evaProps.style);\n            return (react_1.default.createElement(react_native_1.Animated.View, { style: { transform: [{ rotate: this.expandToRotateInterpolation }] } },\n                react_1.default.createElement(chevronDown_component_1.ChevronDown, Object.assign({}, evaProps, { fill: style.tintColor }))));\n        };\n        this.renderItemsWithDefaultProps = () => {\n            return react_1.default.Children.map(this.props.children, (item) => {\n                return react_1.default.cloneElement(item, this.defaultItemProps, null);\n            });\n        };\n        this.renderGroupedItems = (evaStyle) => {\n            return (react_1.default.createElement(react_native_1.Animated.View, { style: [styles.submenu, this.submenuStyle, evaStyle] }, this.renderItemsWithDefaultProps()));\n        };\n        this.renderMeasuringGroupedItems = (evaStyle) => {\n            return (react_1.default.createElement(devsupport_1.MeasureElement, { shouldUseTopInsets: theme_1.ModalService.getShouldUseTopInsets, onMeasure: this.onSubmenuMeasure }, this.renderGroupedItems(evaStyle)));\n        };\n        this.renderGroupedItemsIfNeeded = (evaStyle) => {\n            if (!this.hasSubmenu) {\n                return null;\n            }\n            if (this.shouldMeasureSubmenu) {\n                return this.renderMeasuringGroupedItems(evaStyle);\n            }\n            return this.renderGroupedItems(evaStyle);\n        };\n    }\n    get hasSubmenu() {\n        return react_1.default.Children.count(this.props.children) > 0;\n    }\n    get shouldMeasureSubmenu() {\n        return this.state.submenuHeight === 1;\n    }\n    get expandAnimationValue() {\n        // @ts-ignore - private api, but let's us avoid creating animation listeners.\n        // `this.expandAnimation.addListener`\n        return this.expandAnimation._value;\n    }\n    get expandToRotateInterpolation() {\n        return this.expandAnimation.interpolate({\n            inputRange: [-this.state.submenuHeight, CHEVRON_DEG_EXPANDED],\n            outputRange: [`${CHEVRON_DEG_COLLAPSED}deg`, `${CHEVRON_DEG_EXPANDED}deg`],\n        });\n    }\n    get submenuStyle() {\n        // @ts-ignore - issue of `@types/react-native` package\n        return this.shouldMeasureSubmenu ? styles.outscreen : { height: this.expandAnimation };\n    }\n    get defaultItemProps() {\n        return { appearance: 'grouped' };\n    }\n    render() {\n        const { children, ...itemProps } = this.props;\n        return (react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(menuItem_component_1.MenuItem, Object.assign({ accessoryRight: this.renderAccessoryIfNeeded }, itemProps, { onPress: this.onPress })),\n            this.renderGroupedItemsIfNeeded({})));\n    }\n}\nexports.MenuGroup = MenuGroup;\nconst styles = react_native_1.StyleSheet.create({\n    outscreen: {\n        position: 'absolute',\n        left: POSITION_OUTSCREEN.x,\n        top: POSITION_OUTSCREEN.y,\n    },\n    submenu: {\n        overflow: 'hidden',\n    },\n});\n//# sourceMappingURL=menuGroup.component.js.map"]},"metadata":{},"sourceType":"script"}