{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ChatService = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _toArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toArray\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar ChatService = (0, _createClass2.default)(function ChatService() {\n  var _this = this;\n\n  (0, _classCallCheck2.default)(this, ChatService);\n\n  this.createMessageGroups = function (source) {\n    if (!source.length) {\n      return [];\n    }\n\n    var result = [];\n\n    var _source = (0, _toArray2.default)(source),\n        firstMessage = _source[0],\n        messages = _source.slice(1);\n\n    var currentGroup = [firstMessage];\n    messages.forEach(function (message) {\n      if (_this.fitsGroupSafe(message, currentGroup)) {\n        currentGroup.push(message);\n      } else {\n        result.push(currentGroup);\n        currentGroup = [message];\n      }\n    });\n    return [].concat(result, [currentGroup]);\n  };\n\n  this.fitsGroupSafe = function (message, group) {\n    var _group = (0, _slicedToArray2.default)(group, 1),\n        firstGroupMessage = _group[0];\n\n    return _this.isSameGroupSafe(firstGroupMessage, message);\n  };\n\n  this.isSameGroup = function (lhs, rhs) {\n    return lhs.reply === rhs.reply;\n  };\n\n  this.isSameGroupSafe = function (lhs, rhs) {\n    if (lhs && rhs) {\n      return _this.isSameGroup(lhs, rhs);\n    }\n\n    return false;\n  };\n});\nexports.ChatService = ChatService;","map":{"version":3,"names":["ChatService","createMessageGroups","source","length","result","firstMessage","messages","currentGroup","forEach","message","fitsGroupSafe","push","group","firstGroupMessage","isSameGroupSafe","isSameGroup","lhs","rhs","reply"],"sources":["C:/wks/reactnative/prueba/kitten2/src/layouts/messaging/chat-1/extra/chat.service.ts"],"sourcesContent":["import { Message } from './data';\n\ntype MessageGroup = Message[];\n\nexport class ChatService {\n\n  public createMessageGroups = (source: Message[]): MessageGroup[] => {\n    if (!source.length) {\n      return [];\n    }\n\n    const result: MessageGroup[] = [];\n    const [firstMessage, ...messages] = source;\n\n    let currentGroup: MessageGroup = [firstMessage];\n\n    messages.forEach((message: Message): void => {\n      if (this.fitsGroupSafe(message, currentGroup)) {\n        currentGroup.push(message);\n      } else {\n        result.push(currentGroup);\n        currentGroup = [message];\n      }\n    });\n\n    return [...result, currentGroup];\n  };\n\n  private fitsGroupSafe = (message: Message, group: MessageGroup): boolean => {\n    const [firstGroupMessage] = group;\n\n    return this.isSameGroupSafe(firstGroupMessage, message);\n  };\n\n  private isSameGroup = (lhs: Message, rhs: Message): boolean => {\n    return lhs.reply === rhs.reply;\n  };\n\n  private isSameGroupSafe = (lhs: Message, rhs: Message): boolean => {\n    if (lhs && rhs) {\n      return this.isSameGroup(lhs, rhs);\n    }\n\n    return false;\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;IAIaA,W;;;;;OAEJC,mB,GAAsB,UAACC,MAAD,EAAuC;IAClE,IAAI,CAACA,MAAM,CAACC,MAAZ,EAAoB;MAClB,OAAO,EAAP;IACD;;IAED,IAAMC,MAAsB,GAAG,EAA/B;;IACA,qCAAoCF,MAApC;IAAA,IAAOG,YAAP;IAAA,IAAwBC,QAAxB;;IAEA,IAAIC,YAA0B,GAAG,CAACF,YAAD,CAAjC;IAEAC,QAAQ,CAACE,OAAT,CAAiB,UAACC,OAAD,EAA4B;MAC3C,IAAI,KAAI,CAACC,aAAL,CAAmBD,OAAnB,EAA4BF,YAA5B,CAAJ,EAA+C;QAC7CA,YAAY,CAACI,IAAb,CAAkBF,OAAlB;MACD,CAFD,MAEO;QACLL,MAAM,CAACO,IAAP,CAAYJ,YAAZ;QACAA,YAAY,GAAG,CAACE,OAAD,CAAf;MACD;IACF,CAPD;IASA,iBAAWL,MAAX,GAAmBG,YAAnB;EACD,C;;OAEOG,a,GAAgB,UAACD,OAAD,EAAmBG,KAAnB,EAAoD;IAC1E,0CAA4BA,KAA5B;IAAA,IAAOC,iBAAP;;IAEA,OAAO,KAAI,CAACC,eAAL,CAAqBD,iBAArB,EAAwCJ,OAAxC,CAAP;EACD,C;;OAEOM,W,GAAc,UAACC,GAAD,EAAeC,GAAf,EAAyC;IAC7D,OAAOD,GAAG,CAACE,KAAJ,KAAcD,GAAG,CAACC,KAAzB;EACD,C;;OAEOJ,e,GAAkB,UAACE,GAAD,EAAeC,GAAf,EAAyC;IACjE,IAAID,GAAG,IAAIC,GAAX,EAAgB;MACd,OAAO,KAAI,CAACF,WAAL,CAAiBC,GAAjB,EAAsBC,GAAtB,CAAP;IACD;;IAED,OAAO,KAAP;EACD,C"},"metadata":{},"sourceType":"script"}