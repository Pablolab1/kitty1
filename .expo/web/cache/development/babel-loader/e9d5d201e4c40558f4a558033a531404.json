{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Chat = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _components = require(\"@ui-kitten/components\");\n\nvar _chatMessageContent = require(\"./chat-message-content.component\");\n\nvar _chatMessageGroup = require(\"./chat-message-group.component\");\n\nvar _chatMessage = require(\"./chat-message.component\");\n\nvar _chat = require(\"./chat.service\");\n\nvar _excluded = [\"followEnd\", \"contentContainerStyle\", \"data\"];\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\wks\\\\reactnative\\\\prueba\\\\kitten2\\\\src\\\\layouts\\\\messaging\\\\chat-1\\\\extra\\\\chat.component.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar chatService = new _chat.ChatService();\n\nvar Chat = function Chat(props) {\n  var listRef = _react.default.useRef();\n\n  var contentHeight = 0;\n  var followEnd = props.followEnd,\n      contentContainerStyle = props.contentContainerStyle,\n      data = props.data,\n      listProps = (0, _objectWithoutProperties2.default)(props, _excluded);\n\n  var scrollToEnd = function scrollToEnd(params) {\n    listRef.current.scrollToEnd(_objectSpread({\n      offset: contentHeight\n    }, params));\n  };\n\n  var scrollToIndex = function scrollToIndex(params) {\n    listRef.current.scrollToIndex(params);\n  };\n\n  var scrollToOffset = function scrollToOffset(params) {\n    listRef.current.scrollToOffset(params);\n  };\n\n  var onContentSizeChange = function onContentSizeChange(width, height) {\n    contentHeight = height;\n    props.followEnd && setTimeout(scrollToEnd, 0);\n    listProps.onContentSizeChange && listProps.onContentSizeChange(width, height);\n  };\n\n  var renderMessageContent = function renderMessageContent(message, style) {\n    return _react.default.createElement(_chatMessageContent.ChatMessageContent, {\n      style: style.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }\n    }, message);\n  };\n\n  var renderMessage = function renderMessage(message) {\n    return _react.default.createElement(_chatMessage.ChatMessage, {\n      style: styles.message,\n      message: message,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }\n    }, renderMessageContent);\n  };\n\n  var renderMessageGroup = function renderMessageGroup(info) {\n    return _react.default.createElement(_chatMessageGroup.ChatMessageGroup, {\n      style: styles.group,\n      data: info.item,\n      renderItem: renderMessage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }\n    });\n  };\n\n  return _react.default.createElement(_components.List, (0, _extends2.default)({\n    ref: listRef\n  }, listProps, {\n    data: chatService.createMessageGroups(data),\n    contentContainerStyle: [styles.contentContainer, contentContainerStyle],\n    onContentSizeChange: onContentSizeChange,\n    renderItem: renderMessageGroup,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }));\n};\n\nexports.Chat = Chat;\n\nvar styles = _reactNative.StyleSheet.create({\n  contentContainer: {\n    justifyContent: 'flex-end'\n  },\n  group: {\n    marginVertical: 8\n  },\n  message: {\n    marginVertical: 4\n  }\n});","map":{"version":3,"names":["chatService","ChatService","Chat","props","listRef","React","useRef","contentHeight","followEnd","contentContainerStyle","data","listProps","scrollToEnd","params","current","offset","scrollToIndex","scrollToOffset","onContentSizeChange","width","height","setTimeout","renderMessageContent","message","style","container","renderMessage","styles","renderMessageGroup","info","group","item","createMessageGroups","contentContainer","StyleSheet","create","justifyContent","marginVertical"],"sources":["C:/wks/reactnative/prueba/kitten2/src/layouts/messaging/chat-1/extra/chat.component.tsx"],"sourcesContent":["import React from 'react';\nimport { ListRenderItemInfo, StyleSheet } from 'react-native';\nimport { List, ListProps, StyleType } from '@ui-kitten/components';\nimport { ChatMessageContent } from './chat-message-content.component';\nimport { ChatMessageGroup } from './chat-message-group.component';\nimport { ChatMessage } from './chat-message.component';\nimport { ChatService } from './chat.service';\nimport { Message } from './data';\n\nexport interface ChatProps extends Omit<ListProps, 'renderItem'> {\n  data: Message[];\n  followEnd: boolean;\n}\n\nconst chatService: ChatService = new ChatService();\n\nexport const Chat = (props: ChatProps): React.ReactElement => {\n\n  const listRef: React.RefObject<any> = React.useRef();\n  let contentHeight: number = 0;\n\n  const { followEnd, contentContainerStyle, data, ...listProps } = props;\n\n  const scrollToEnd = (params): void => {\n    listRef.current.scrollToEnd({ offset: contentHeight, ...params });\n  };\n\n  const scrollToIndex = (params): void => {\n    listRef.current.scrollToIndex(params);\n  };\n\n  const scrollToOffset = (params): void => {\n    listRef.current.scrollToOffset(params);\n  };\n\n  const onContentSizeChange = (width: number, height: number): void => {\n    contentHeight = height;\n\n    props.followEnd && setTimeout(scrollToEnd, 0);\n\n    listProps.onContentSizeChange && listProps.onContentSizeChange(width, height);\n  };\n\n  const renderMessageContent = (message: Message, style: StyleType): React.ReactElement => (\n    <ChatMessageContent style={style.container}>\n      {message}\n    </ChatMessageContent>\n  );\n\n  const renderMessage = (message: Message): React.ReactElement => (\n    <ChatMessage\n      style={styles.message}\n      message={message}>\n      {renderMessageContent}\n    </ChatMessage>\n  );\n\n  const renderMessageGroup = (info: ListRenderItemInfo<Message[]>): React.ReactElement => (\n    <ChatMessageGroup\n      style={styles.group}\n      data={info.item}\n      renderItem={renderMessage}\n    />\n  );\n\n  return (\n    <List\n      ref={listRef}\n      {...listProps}\n      data={chatService.createMessageGroups(data)}\n      contentContainerStyle={[styles.contentContainer, contentContainerStyle]}\n      onContentSizeChange={onContentSizeChange}\n      renderItem={renderMessageGroup}\n    />\n  );\n};\n\nconst styles = StyleSheet.create({\n  contentContainer: {\n    justifyContent: 'flex-end',\n  },\n  group: {\n    marginVertical: 8,\n  },\n  message: {\n    marginVertical: 4,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}