{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nvar _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _get = require(\"@babel/runtime/helpers/get\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_native_1 = require(\"react-native\");\n\nvar animation_1 = require(\"../animation/animation\");\n\nvar PI = 180;\nvar PI2 = 360;\nvar OFFSET_MIN = PI / 12;\nvar OFFSET_MAX = PI / 6;\nvar BaseBezierEasing = react_native_1.Easing.bezier(0.4, 0.0, 0.7, 1.0);\n\nvar StartArcEasing = function StartArcEasing(progress) {\n  return -PI + OFFSET_MIN + (PI - OFFSET_MAX) * BaseBezierEasing(progress);\n};\n\nvar EndArcEasing = function EndArcEasing(progress) {\n  return PI2 - OFFSET_MIN + (-PI + OFFSET_MAX) * BaseBezierEasing(progress);\n};\n\nvar DEFAULT_CONFIG = {\n  duration: 2400,\n  easing: react_native_1.Easing.linear,\n  cycles: -1,\n  useNativeDriver: react_native_1.Platform.OS !== 'web'\n};\n\nvar SpinnerAnimation = function (_animation_1$Animatio) {\n  _inherits(SpinnerAnimation, _animation_1$Animatio);\n\n  var _super = _createSuper(SpinnerAnimation);\n\n  function SpinnerAnimation(arcSize, config) {\n    var _this;\n\n    _classCallCheck(this, SpinnerAnimation);\n\n    _this = _super.call(this, _extends({}, DEFAULT_CONFIG, config));\n\n    _this.createFrameRange = function (duration) {\n      var numberOfFrames = 60 * duration / 1000;\n      return new Array(numberOfFrames).fill(0);\n    };\n\n    _this.createContainerInterpolation = function () {\n      return _this.animationValue.interpolate({\n        inputRange: [0, 1],\n        outputRange: [_this.toDegValue(OFFSET_MAX + OFFSET_MIN), _this.toDegValue(2 * PI2 + OFFSET_MAX + OFFSET_MIN)]\n      });\n    };\n\n    _this.createArcInterpolation = function (easing) {\n      return _this.animationValue.interpolate({\n        inputRange: _this.createArcInterpolationInputRange(),\n        outputRange: _this.createArcInterpolationOutputRange(easing)\n      });\n    };\n\n    _this.createArcInterpolationInputRange = function () {\n      return _this.animationFrames.map(function (item, frame) {\n        return frame / (_this.animationFrames.length - 1);\n      });\n    };\n\n    _this.createArcInterpolationOutputRange = function (easing) {\n      return _this.animationFrames.map(function (item, frame) {\n        var progress = 2 * frame / (_this.animationFrames.length - 1);\n        var boundedProgress = Math.min(2.0 - progress, progress);\n        return _this.toDegValue(easing(boundedProgress));\n      });\n    };\n\n    _this.toStyleTransformProp = function (rotate) {\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var transform = [].concat(_toConsumableArray(source.transform || []), [{\n        rotate: rotate\n      }]);\n      return _extends({}, source, {\n        transform: transform\n      });\n    };\n\n    _this.toDegValue = function (source) {\n      return source + \"deg\";\n    };\n\n    _this.arcSize = arcSize;\n    _this.animationValue = new react_native_1.Animated.Value(0);\n    _this.animationFrames = _this.createFrameRange(_this.config.duration);\n    return _this;\n  }\n\n  _createClass(SpinnerAnimation, [{\n    key: \"animation\",\n    get: function get() {\n      return react_native_1.Animated.timing(this.animationValue, _extends({\n        toValue: 1.0\n      }, this.config));\n    }\n  }, {\n    key: \"start\",\n    value: function start(callback) {\n      this.animationValue.setValue(0);\n\n      _get(_getPrototypeOf(SpinnerAnimation.prototype), \"start\", this).call(this, callback);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      _get(_getPrototypeOf(SpinnerAnimation.prototype), \"stop\", this).call(this);\n\n      this.animationValue.setValue(0);\n    }\n  }, {\n    key: \"toProps\",\n    value: function toProps() {\n      var containerInterpolation = this.createContainerInterpolation();\n      var startArcInterpolation = this.createArcInterpolation(StartArcEasing);\n      var endArcInterpolation = this.createArcInterpolation(EndArcEasing);\n      return {\n        container: this.toStyleTransformProp(containerInterpolation),\n        start: this.toStyleTransformProp(startArcInterpolation),\n        end: this.toStyleTransformProp(endArcInterpolation, {\n          transform: [{\n            translateY: -this.arcSize / 2\n          }]\n        })\n      };\n    }\n  }]);\n\n  return SpinnerAnimation;\n}(animation_1.Animation);\n\nexports.SpinnerAnimation = SpinnerAnimation;","map":{"version":3,"sources":["../../../../../src/components/ui/spinner/animation.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_native_1 = require(\"react-native\");\nconst animation_1 = require(\"../animation/animation\");\nconst PI = 180;\nconst PI2 = 360;\nconst OFFSET_MIN = PI / 12;\nconst OFFSET_MAX = PI / 6;\nconst BaseBezierEasing = react_native_1.Easing.bezier(0.4, 0.0, 0.7, 1.0);\nconst StartArcEasing = (progress) => {\n    return -PI + OFFSET_MIN + (PI - OFFSET_MAX) * BaseBezierEasing(progress);\n};\nconst EndArcEasing = (progress) => {\n    return PI2 - OFFSET_MIN + (-PI + OFFSET_MAX) * BaseBezierEasing(progress);\n};\nconst DEFAULT_CONFIG = {\n    duration: 2400,\n    easing: react_native_1.Easing.linear,\n    cycles: -1,\n    useNativeDriver: react_native_1.Platform.OS !== 'web',\n};\n/**\n * Animates a Spinner in a Material Design way.\n *\n * Thanks these guys for open sourcing the algorithm: https://github.com/n4kz/react-native-indicators\n */\nclass SpinnerAnimation extends animation_1.Animation {\n    constructor(arcSize, config) {\n        super({ ...DEFAULT_CONFIG, ...config });\n        /**\n         * @param {number} duration - animation duration.\n         * @returns an array of frames fitted into animation.\n         */\n        this.createFrameRange = (duration) => {\n            const numberOfFrames = 60 * duration / 1000;\n            return new Array(numberOfFrames).fill(0);\n        };\n        this.createContainerInterpolation = () => {\n            return this.animationValue.interpolate({\n                inputRange: [0, 1],\n                outputRange: [\n                    this.toDegValue(OFFSET_MAX + OFFSET_MIN),\n                    this.toDegValue((2 * PI2 + OFFSET_MAX + OFFSET_MIN)),\n                ],\n            });\n        };\n        this.createArcInterpolation = (easing) => {\n            return this.animationValue.interpolate({\n                inputRange: this.createArcInterpolationInputRange(),\n                outputRange: this.createArcInterpolationOutputRange(easing),\n            });\n        };\n        /**\n         * Maps the animation frames into initial animation values specific for each frame.\n         *\n         * @returns a container interpolation input range in a numeric format.\n         */\n        this.createArcInterpolationInputRange = () => {\n            return this.animationFrames.map((item, frame) => {\n                return frame / (this.animationFrames.length - 1);\n            });\n        };\n        /**\n         * Maps the animation frames into a final animation values specific for each frame.\n         *\n         * @param {(progress: number) => number} easing - Easing function specific for the arc.\n         * @returns an arc interpolation end values eased with an `easing` function in a StyleSheet degree format.\n         */\n        this.createArcInterpolationOutputRange = (easing) => {\n            return this.animationFrames.map((item, frame) => {\n                const progress = 2 * frame / (this.animationFrames.length - 1);\n                const boundedProgress = Math.min(2.0 - progress, progress);\n                return this.toDegValue(easing(boundedProgress));\n            });\n        };\n        /**\n         * @param {Animated.AnimatedInterpolation} rotate - animated rotation animationValue.\n         * @param {ViewStyle} source - initial StyleSheet object.\n         * @returns a final StyleSheet object with a `rotate` animation value.\n         */\n        this.toStyleTransformProp = (rotate, source = {}) => {\n            const transform = [...(source.transform || []), { rotate }];\n            // @ts-ignore: AnimatedInterpolation does not fit RotateTransform type declaration\n            return { ...source, transform };\n        };\n        /**\n         * @param {number} source - degrees in a numeric format.\n         * @returns degrees in a StyleSheet format.\n         */\n        this.toDegValue = (source) => {\n            return `${source}deg`;\n        };\n        this.arcSize = arcSize;\n        this.animationValue = new react_native_1.Animated.Value(0);\n        this.animationFrames = this.createFrameRange(this.config.duration);\n    }\n    get animation() {\n        return react_native_1.Animated.timing(this.animationValue, { toValue: 1.0, ...this.config });\n    }\n    start(callback) {\n        // reset animation value before the next animation cycle\n        this.animationValue.setValue(0);\n        super.start(callback);\n    }\n    stop() {\n        super.stop();\n        this.animationValue.setValue(0);\n    }\n    /**\n     * @returns {SpinnerAnimationStyle} - an object that contains container, start and end arcs transform styles.\n     */\n    toProps() {\n        const containerInterpolation = this.createContainerInterpolation();\n        const startArcInterpolation = this.createArcInterpolation(StartArcEasing);\n        const endArcInterpolation = this.createArcInterpolation(EndArcEasing);\n        return {\n            container: this.toStyleTransformProp(containerInterpolation),\n            start: this.toStyleTransformProp(startArcInterpolation),\n            end: this.toStyleTransformProp(endArcInterpolation, {\n                transform: [{ translateY: -this.arcSize / 2 }],\n            }),\n        };\n    }\n}\nexports.SpinnerAnimation = SpinnerAnimation;\n//# sourceMappingURL=animation.js.map"]},"metadata":{},"sourceType":"script"}