{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar style_service_1 = require(\"./style.service\");\n\nvar SEPARATOR_MAPPING_ENTRY = '.';\nvar DOC_ROOT = 'https://akveo.github.io/react-native-ui-kitten/docs';\n\nvar StyleConsumerService = function () {\n  function StyleConsumerService(name, style) {\n    _classCallCheck(this, StyleConsumerService);\n\n    this.name = name;\n    this.meta = this.safe(style[name], function (generatedConfig) {\n      return generatedConfig.meta;\n    });\n\n    if (!this.meta) {\n      var message = [\"\\n\" + this.name + \": unsupported configuration.\", 'Using UI Kitten components is only possible with configuring ApplicationProvider.', \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/guides/getting-started#manual-installation\", '\\nIn case you have all in place, there might be an incorrect usage of a \"styled\" function.', \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/design-system/custom-component-mapping\"].join('\\n');\n      console.error(message);\n    }\n  }\n\n  _createClass(StyleConsumerService, [{\n    key: \"createDefaultProps\",\n    value: function createDefaultProps() {\n      var appearance = this.getDefaultAppearance();\n      var variants = this.getDefaultVariants();\n      var states = this.getDefaultStates();\n      return _extends({\n        appearance: appearance\n      }, variants, states);\n    }\n  }, {\n    key: \"createStyleProp\",\n    value: function createStyleProp(source, style, theme, interaction) {\n      var styleInfo = this.getStyleInfo(source, this.withValidInteraction(interaction));\n      var generatedMapping = this.getGeneratedStyleMapping(style, styleInfo);\n\n      if (!generatedMapping) {\n        var message = [this.name + \": unsupported configuration.\", \"Check one of the following prop values: \" + JSON.stringify(styleInfo, null, 2), \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/components/\" + this.name.toLowerCase() + \"/api\"].join('\\n');\n        console.warn(message);\n        return this.createStyleProp(_extends({}, source, this.createDefaultProps()), style, theme, interaction);\n      }\n\n      var mapping = this.withValidParameters(generatedMapping);\n      return style_service_1.StyleService.createThemedEntry(mapping, theme);\n    }\n  }, {\n    key: \"getGeneratedStyleMapping\",\n    value: function getGeneratedStyleMapping(style, info) {\n      var _this = this;\n\n      return this.safe(style[this.name], function (componentStyles) {\n        var styleKeys = Object.keys(componentStyles.styles);\n\n        var query = _this.findGeneratedQuery(info, styleKeys);\n\n        return componentStyles.styles[query];\n      });\n    }\n  }, {\n    key: \"withValidInteraction\",\n    value: function withValidInteraction(interaction) {\n      var _this2 = this;\n\n      var validInteractions = interaction.filter(function (key) {\n        return Object.keys(_this2.meta.states).includes(key);\n      });\n\n      if (validInteractions.length < interaction.length) {\n        var message = [this.name + \": unsupported configuration.\", \"Check one of the following dispatched interactions: \" + interaction, \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/design-system/custom-component-mapping\"].join('\\n');\n        console.warn(message);\n      }\n\n      return validInteractions;\n    }\n  }, {\n    key: \"withValidParameters\",\n    value: function withValidParameters(mapping) {\n      var _this3 = this;\n\n      var invalidParameters = [];\n      Object.keys(mapping).forEach(function (key) {\n        if (!Object.keys(_this3.meta.parameters).includes(key)) {\n          invalidParameters.push(key);\n          delete mapping[key];\n        }\n      });\n\n      if (invalidParameters.length !== 0) {\n        var message = [this.name + \": unsupported configuration.\", \"Unable to apply \" + invalidParameters, 'There might be an incorrect usage of mapping', \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/design-system/custom-component-mapping\"].join('\\n');\n        console.warn(message);\n      }\n\n      return mapping;\n    }\n  }, {\n    key: \"getStyleInfo\",\n    value: function getStyleInfo(props, interaction) {\n      var variantProps = this.getDerivedVariants(this.meta, props);\n      var stateProps = this.getDerivedStates(this.meta, props);\n      var variants = Object.keys(variantProps).map(function (variant) {\n        return variantProps[variant];\n      });\n      var states = Object.keys(stateProps);\n      return {\n        appearance: props.appearance,\n        variants: variants,\n        states: [].concat(states, _toConsumableArray(interaction))\n      };\n    }\n  }, {\n    key: \"getDefaultAppearance\",\n    value: function getDefaultAppearance() {\n      var _this4 = this;\n\n      var matches = Object.keys(this.meta.appearances).filter(function (appearance) {\n        return _this4.meta.appearances[appearance].default === true;\n      });\n      return matches[matches.length - 1];\n    }\n  }, {\n    key: \"getDefaultVariants\",\n    value: function getDefaultVariants() {\n      return this.transformObject(this.meta.variantGroups, function (variants, group) {\n        return Object.keys(variants[group]).find(function (variant) {\n          return variants[group][variant].default === true;\n        });\n      });\n    }\n  }, {\n    key: \"getDefaultStates\",\n    value: function getDefaultStates() {\n      return this.transformObject(this.meta.states, function (states, state) {\n        var isDefault = states[state].default === true;\n        return isDefault ? isDefault : undefined;\n      });\n    }\n  }, {\n    key: \"getDerivedVariants\",\n    value: function getDerivedVariants(meta, props) {\n      return this.transformObject(props, function (p, prop) {\n        var isVariant = Object.keys(meta.variantGroups).includes(prop);\n        return isVariant ? p[prop] : undefined;\n      });\n    }\n  }, {\n    key: \"getDerivedStates\",\n    value: function getDerivedStates(meta, props) {\n      return this.transformObject(props, function (p, prop) {\n        var isState = Object.keys(meta.states).includes(prop);\n        var isAssigned = p[prop] === true;\n        return isState && isAssigned;\n      });\n    }\n  }, {\n    key: \"transformObject\",\n    value: function transformObject(value, transform) {\n      return Object.keys(value).reduce(function (acc, key) {\n        var nextValue = transform(value, key);\n        return nextValue ? _extends({}, acc, _defineProperty({}, key, nextValue)) : acc;\n      }, {});\n    }\n  }, {\n    key: \"findGeneratedQuery\",\n    value: function findGeneratedQuery(info, source) {\n      var _this5 = this;\n\n      var query = [info.appearance].concat(_toConsumableArray(info.variants), _toConsumableArray(info.states));\n      return source.find(function (value) {\n        return _this5.compareArrays(query, value.split(SEPARATOR_MAPPING_ENTRY));\n      });\n    }\n  }, {\n    key: \"compareArrays\",\n    value: function compareArrays(lhs, rhs) {\n      if (lhs.length !== rhs.length) {\n        return false;\n      }\n\n      return lhs.reduce(function (acc, current) {\n        return acc && rhs.includes(current);\n      }, true);\n    }\n  }, {\n    key: \"safe\",\n    value: function safe(value, reducer, fallback) {\n      if (value) {\n        return reducer(value);\n      }\n\n      return fallback;\n    }\n  }]);\n\n  return StyleConsumerService;\n}();\n\nexports.StyleConsumerService = StyleConsumerService;","map":{"version":3,"sources":["../../../../../src/components/theme/style/styleConsumer.service.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst style_service_1 = require(\"./style.service\");\nconst SEPARATOR_MAPPING_ENTRY = '.';\nconst DOC_ROOT = 'https://akveo.github.io/react-native-ui-kitten/docs';\nclass StyleConsumerService {\n    constructor(name, style) {\n        this.name = name;\n        this.meta = this.safe(style[name], (generatedConfig) => {\n            return generatedConfig.meta;\n        });\n        if (!this.meta) {\n            const message = [\n                `\\n${this.name}: unsupported configuration.`,\n                'Using UI Kitten components is only possible with configuring ApplicationProvider.',\n                `📖 Documentation: ${DOC_ROOT}/guides/getting-started#manual-installation`,\n                '\\nIn case you have all in place, there might be an incorrect usage of a \"styled\" function.',\n                `📖 Documentation: ${DOC_ROOT}/design-system/custom-component-mapping`,\n            ].join('\\n');\n            console.error(message);\n        }\n    }\n    createDefaultProps() {\n        const appearance = this.getDefaultAppearance();\n        const variants = this.getDefaultVariants();\n        const states = this.getDefaultStates();\n        return { appearance, ...variants, ...states };\n    }\n    createStyleProp(source, style, theme, interaction) {\n        const styleInfo = this.getStyleInfo(source, this.withValidInteraction(interaction));\n        const generatedMapping = this.getGeneratedStyleMapping(style, styleInfo);\n        if (!generatedMapping) {\n            const message = [\n                `${this.name}: unsupported configuration.`,\n                `Check one of the following prop values: ${JSON.stringify(styleInfo, null, 2)}`,\n                `📖 Documentation: ${DOC_ROOT}/components/${this.name.toLowerCase()}/api`,\n            ].join('\\n');\n            console.warn(message);\n            return this.createStyleProp({ ...source, ...this.createDefaultProps() }, style, theme, interaction);\n        }\n        const mapping = this.withValidParameters(generatedMapping);\n        return style_service_1.StyleService.createThemedEntry(mapping, theme);\n    }\n    getGeneratedStyleMapping(style, info) {\n        return this.safe(style[this.name], (componentStyles) => {\n            const styleKeys = Object.keys(componentStyles.styles);\n            const query = this.findGeneratedQuery(info, styleKeys);\n            return componentStyles.styles[query];\n        });\n    }\n    withValidInteraction(interaction) {\n        const validInteractions = interaction.filter((key) => {\n            return Object.keys(this.meta.states).includes(key);\n        });\n        if (validInteractions.length < interaction.length) {\n            const message = [\n                `${this.name}: unsupported configuration.`,\n                `Check one of the following dispatched interactions: ${interaction}`,\n                `📖 Documentation: ${DOC_ROOT}/design-system/custom-component-mapping`,\n            ].join('\\n');\n            console.warn(message);\n        }\n        return validInteractions;\n    }\n    withValidParameters(mapping) {\n        const invalidParameters = [];\n        Object.keys(mapping).forEach((key) => {\n            if (!Object.keys(this.meta.parameters).includes(key)) {\n                invalidParameters.push(key);\n                delete mapping[key];\n            }\n        });\n        if (invalidParameters.length !== 0) {\n            const message = [\n                `${this.name}: unsupported configuration.`,\n                `Unable to apply ${invalidParameters}`,\n                'There might be an incorrect usage of mapping',\n                `📖 Documentation: ${DOC_ROOT}/design-system/custom-component-mapping`,\n            ].join('\\n');\n            console.warn(message);\n        }\n        return mapping;\n    }\n    getStyleInfo(props, interaction) {\n        const variantProps = this.getDerivedVariants(this.meta, props);\n        const stateProps = this.getDerivedStates(this.meta, props);\n        const variants = Object.keys(variantProps).map((variant) => {\n            return variantProps[variant];\n        });\n        const states = Object.keys(stateProps);\n        return {\n            appearance: props.appearance,\n            variants: variants,\n            states: [...states, ...interaction],\n        };\n    }\n    getDefaultAppearance() {\n        const matches = Object.keys(this.meta.appearances).filter((appearance) => {\n            return this.meta.appearances[appearance].default === true;\n        });\n        return matches[matches.length - 1];\n    }\n    getDefaultVariants() {\n        return this.transformObject(this.meta.variantGroups, (variants, group) => {\n            return Object.keys(variants[group]).find((variant) => {\n                return variants[group][variant].default === true;\n            });\n        });\n    }\n    getDefaultStates() {\n        return this.transformObject(this.meta.states, (states, state) => {\n            const isDefault = states[state].default === true;\n            return isDefault ? isDefault : undefined;\n        });\n    }\n    getDerivedVariants(meta, props) {\n        return this.transformObject(props, (p, prop) => {\n            const isVariant = Object.keys(meta.variantGroups).includes(prop);\n            return isVariant ? p[prop] : undefined;\n        });\n    }\n    getDerivedStates(meta, props) {\n        return this.transformObject(props, (p, prop) => {\n            const isState = Object.keys(meta.states).includes(prop);\n            const isAssigned = p[prop] === true;\n            return isState && isAssigned;\n        });\n    }\n    /**\n     * Iterates throw `value` object keys and fills it values with values provided by `transform` callback\n     * If `transform` returns `undefined`, then appends nothing\n     *\n     * @param value (V extends object) - object to transform\n     * @param transform - object key transformation callback\n     */\n    transformObject(value, transform) {\n        return Object.keys(value).reduce((acc, key) => {\n            const nextValue = transform(value, key);\n            return nextValue ? {\n                ...acc,\n                [key]: nextValue,\n            } : acc;\n        }, {});\n    }\n    /**\n     * Finds identical keys across `source` keys array\n     *\n     * Example:\n     *\n     * source = ['default.error.small.checked', ...]\n     * info = { appearance: 'default', variants: ['small', 'error'], states: ['checked'] }\n     *\n     * will return ['default', 'error', 'small', 'checked']\n     *\n     * @param info (StyleInfo) - component style info\n     * @param source (string[]) - array of style keys\n     *\n     * @return (string | undefined) - key identical to some of `source` keys if presents\n     */\n    findGeneratedQuery(info, source) {\n        const query = [\n            info.appearance,\n            ...info.variants,\n            ...info.states,\n        ];\n        return source.find((value) => this.compareArrays(query, value.split(SEPARATOR_MAPPING_ENTRY)));\n    }\n    /**\n     * @param lhs (string[]) - comparable array\n     * @param rhs (string[]) - comparing array\n     *\n     * @return true if all of lhs keys are included in rhs\n     */\n    compareArrays(lhs, rhs) {\n        if (lhs.length !== rhs.length) {\n            return false;\n        }\n        return lhs.reduce((acc, current) => acc && rhs.includes(current), true);\n    }\n    /**\n     * Safely retrieves R value of T object with reducer\n     *\n     * @param value (T | undefined) - unsafe object which should be processed\n     * @param reducer ((T) => R) - `value` processing lambda. Called if `value` is not `undefined`\n     * @param fallback (R) - fallback value to return. Optional\n     *\n     * @return (R | undefined) - object returned by `reducer` if `value` is not `undefined`, `fallback` otherwise\n     **/\n    safe(value, reducer, fallback) {\n        if (value) {\n            return reducer(value);\n        }\n        return fallback;\n    }\n}\nexports.StyleConsumerService = StyleConsumerService;\n//# sourceMappingURL=styleConsumer.service.js.map"]},"metadata":{},"sourceType":"script"}