{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_native_1 = require(\"react-native\");\n\nvar modalResolver_component_1 = require(\"./modalResolver.component\");\n\nvar modal_service_1 = require(\"./modal.service\");\n\nvar ModalPanel = function (_react_1$default$Comp) {\n  _inherits(ModalPanel, _react_1$default$Comp);\n\n  var _super = _createSuper(ModalPanel);\n\n  function ModalPanel() {\n    var _this;\n\n    _classCallCheck(this, ModalPanel);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      components: new Map()\n    };\n\n    _this.hide = function (identifier) {\n      var components = _this.state.components;\n      components.delete(identifier);\n\n      _this.setState({\n        components: components\n      });\n\n      return '';\n    };\n\n    _this.generateUniqueComponentKey = function () {\n      return Math.random().toString(36).substring(2);\n    };\n\n    _this.areThereAnyComponents = function () {\n      return _this.state.components && _this.state.components.size !== 0;\n    };\n\n    _this.renderModal = function (config, index) {\n      return react_1.default.createElement(modalResolver_component_1.ModalResolver, {\n        key: index,\n        visible: true,\n        backdropStyle: config.backdropStyle,\n        onBackdropPress: config.onBackdropPress\n      }, config.element);\n    };\n\n    _this.renderModals = function () {\n      return Array.from(_this.state.components.values()).map(_this.renderModal);\n    };\n\n    return _this;\n  }\n\n  _createClass(ModalPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      modal_service_1.ModalService.mount(this);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      modal_service_1.ModalService.unmount();\n    }\n  }, {\n    key: \"show\",\n    value: function show(element, config) {\n      var key = this.generateUniqueComponentKey();\n      var components = this.state.components.set(key, _extends({}, config, {\n        element: element\n      }));\n      this.setState({\n        components: components\n      });\n      return key;\n    }\n  }, {\n    key: \"update\",\n    value: function update(identifier, children) {\n      var panelChild = this.state.components.get(identifier);\n\n      if (!panelChild) {\n        return;\n      }\n\n      var childElement = panelChild.element;\n      panelChild.element = react_1.default.cloneElement(childElement, childElement.props, children);\n      var components = this.state.components;\n      components.set(identifier, panelChild);\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react_1.default.createElement(react_native_1.View, {\n        style: styles.container\n      }, this.props.children, this.areThereAnyComponents() && this.renderModals());\n    }\n  }]);\n\n  return ModalPanel;\n}(react_1.default.Component);\n\nexports.ModalPanel = ModalPanel;\nvar styles = react_native_1.StyleSheet.create({\n  container: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["../../../../../src/components/theme/modal/modalPanel.component.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst modalResolver_component_1 = require(\"./modalResolver.component\");\nconst modal_service_1 = require(\"./modal.service\");\nclass ModalPanel extends react_1.default.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            components: new Map(),\n        };\n        this.hide = (identifier) => {\n            const components = this.state.components;\n            components.delete(identifier);\n            this.setState({ components });\n            return '';\n        };\n        this.generateUniqueComponentKey = () => {\n            return Math.random().toString(36).substring(2);\n        };\n        this.areThereAnyComponents = () => {\n            return this.state.components && this.state.components.size !== 0;\n        };\n        this.renderModal = (config, index) => {\n            return (react_1.default.createElement(modalResolver_component_1.ModalResolver, { key: index, visible: true, backdropStyle: config.backdropStyle, onBackdropPress: config.onBackdropPress }, config.element));\n        };\n        this.renderModals = () => {\n            return Array.from(this.state.components.values()).map(this.renderModal);\n        };\n    }\n    componentDidMount() {\n        modal_service_1.ModalService.mount(this);\n    }\n    componentWillUnmount() {\n        modal_service_1.ModalService.unmount();\n    }\n    show(element, config) {\n        const key = this.generateUniqueComponentKey();\n        const components = this.state.components\n            .set(key, { ...config, element });\n        this.setState({ components });\n        return key;\n    }\n    update(identifier, children) {\n        const panelChild = this.state.components.get(identifier);\n        if (!panelChild) {\n            return;\n        }\n        const childElement = panelChild.element;\n        panelChild.element = react_1.default.cloneElement(childElement, childElement.props, children);\n        const components = this.state.components;\n        components.set(identifier, panelChild);\n        this.forceUpdate();\n    }\n    render() {\n        return (react_1.default.createElement(react_native_1.View, { style: styles.container },\n            this.props.children,\n            this.areThereAnyComponents() && this.renderModals()));\n    }\n}\nexports.ModalPanel = ModalPanel;\nconst styles = react_native_1.StyleSheet.create({\n    container: {\n        flex: 1,\n    },\n});\n//# sourceMappingURL=modalPanel.component.js.map"]},"metadata":{},"sourceType":"script"}